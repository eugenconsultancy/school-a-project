# ============================================
# DJANGO SETTINGS - TEMPLATE FOR ALL ENVIRONMENTS
# ============================================
# Copy this file to .env and update with your actual values
# For production, ensure DEBUG=False and all secrets are properly set

# ============================================
# DJANGO CORE SETTINGS
# ============================================
# SECURITY WARNING: keep the secret key used in production secret!
SECRET_KEY=your-secret-key-here-minimum-50-characters-random

# SECURITY WARNING: don't run with debug turned on in production!
DEBUG=False

# Comma-separated list of hosts/domains your site can serve
ALLOWED_HOSTS=localhost,127.0.0.1,yourdomain.com,www.yourdomain.com,.onrender.com,.herokuapp.com

# ============================================
# DATABASE CONFIGURATION
# ============================================
# SQLite for development (default)
# DATABASE_URL=sqlite:///db.sqlite3

# PostgreSQL for production (Render/Heroku)
# Format: postgresql://user:password@host:port/database
DATABASE_URL=postgresql://postgres:password@localhost:5432/school_db

# PostgreSQL with SSL (Production)
# DATABASE_URL=postgresql://user:pass@host:port/dbname?sslmode=require

# MySQL (Alternative)
# DATABASE_URL=mysql://user:password@host:port/database

# ============================================
# STATIC & MEDIA FILES
# ============================================
STATIC_URL=/static/
STATIC_ROOT=/path/to/staticfiles
MEDIA_URL=/media/
MEDIA_ROOT=/path/to/media

# For cloud storage (AWS S3 example)
# AWS_ACCESS_KEY_ID=your-aws-key
# AWS_SECRET_ACCESS_KEY=your-aws-secret
# AWS_STORAGE_BUCKET_NAME=your-bucket-name
# AWS_S3_REGION_NAME=us-east-1

# ============================================
# AUTHENTICATION
# ============================================
AUTH_USER_MODEL=accounts.User
LOGIN_URL=login
LOGIN_REDIRECT_URL=dashboard
LOGOUT_REDIRECT_URL=login

# ============================================
# M-PESA CONFIGURATION
# ============================================
# Sandbox Credentials (for testing)
MPESA_ENVIRONMENT=sandbox
MPESA_CONSUMER_KEY=your_sandbox_consumer_key
MPESA_CONSUMER_SECRET=your_sandbox_consumer_secret
MPESA_SHORTCODE=174379  # Sandbox test shortcode
MPESA_PASSKEY=your_sandbox_passkey
MPESA_CALLBACK_URL=https://yourdomain.com/payments/mpesa-callback/
MPESA_BUSINESS_SHORTCODE=174379
MPESA_TRANSACTION_TYPE=CustomerPayBillOnline

# Production Credentials (for live)
# MPESA_ENVIRONMENT=production
# MPESA_CONSUMER_KEY=your_production_consumer_key
# MPESA_CONSUMER_SECRET=your_production_consumer_secret
# MPESA_SHORTCODE=your_production_shortcode
# MPESA_PASSKEY=your_production_passkey
# MPESA_CALLBACK_URL=https://yourdomain.com/payments/mpesa-callback/

# ============================================
# SECURITY SETTINGS
# ============================================
# CSRF & Session Security (set to True in production)
CSRF_COOKIE_SECURE=False  # Set True in production with HTTPS
SESSION_COOKIE_SECURE=False  # Set True in production with HTTPS
CSRF_COOKIE_HTTPONLY=False
SESSION_COOKIE_HTTPONLY=True
CSRF_TRUSTED_ORIGINS=http://localhost:8000,http://127.0.0.1:8000,https://yourdomain.com,https://*.onrender.com

# HSTS Settings (Production)
SECURE_SSL_REDIRECT=False  # Set True in production
SECURE_HSTS_SECONDS=0  # Set to 31536000 (1 year) in production
SECURE_HSTS_INCLUDE_SUBDOMAINS=False  # Set True in production
SECURE_HSTS_PRELOAD=False  # Set True in production
SECURE_BROWSER_XSS_FILTER=True
SECURE_CONTENT_TYPE_NOSNIFF=True
X_FRAME_OPTIONS=DENY

# ============================================
# DJANGO UNFOLD ADMIN THEME
# ============================================
UNFOLD_SITE_TITLE="School Admin System"
UNFOLD_SITE_HEADER="School Administration"
UNFOLD_SITE_URL=/
UNFOLD_SITE_SYMBOL=school

# ============================================
# EMAIL CONFIGURATION
# ============================================
# Development - Console backend
# EMAIL_BACKEND=django.core.mail.backends.console.EmailBackend

# Production - SMTP (Gmail example)
EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USE_TLS=True
EMAIL_HOST_USER=your-email@gmail.com
EMAIL_HOST_PASSWORD=your-app-specific-password
DEFAULT_FROM_EMAIL=noreply@yourdomain.com

# Alternative - SendGrid
# EMAIL_BACKEND=sendgrid_backend.SendgridBackend
# SENDGRID_API_KEY=your-sendgrid-api-key

# Alternative - Mailgun
# EMAIL_BACKEND=django_mailgun.MailgunBackend
# MAILGUN_API_KEY=your-mailgun-api-key
# MAILGUN_DOMAIN=your-domain.com

# ============================================
# TIME ZONE
# ============================================
TIME_ZONE=Africa/Nairobi
USE_TZ=True

# ============================================
# CELERY / BACKGROUND TASKS
# ============================================
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/0
CELERY_ACCEPT_CONTENT=['application/json']
CELERY_TASK_SERIALIZER='json'
CELERY_RESULT_SERIALIZER='json'
CELERY_TIMEZONE=Africa/Nairobi

# ============================================
# CACHE CONFIGURATION
# ============================================
# Redis Cache
CACHE_URL=redis://localhost:6379/1

# Memcached
# CACHE_URL=memcached://127.0.0.1:11211/

# Database Cache
# CACHE_URL=db://my_cache_table

# ============================================
# LOGGING
# ============================================
DJANGO_LOG_LEVEL=INFO
# Available levels: DEBUG, INFO, WARNING, ERROR, CRITICAL

# Sentry for error tracking (optional)
# SENTRY_DSN=https://your-sentry-key@sentry.io/project-id

# ============================================
# THIRD-PARTY SERVICES
# ============================================
# Africa's Talking SMS (for SMS notifications)
# AT_USERNAME=sandbox
# AT_API_KEY=your-africastalking-api-key

# Twilio SMS
# TWILIO_ACCOUNT_SID=your-twilio-sid
# TWILIO_AUTH_TOKEN=your-twilio-token
# TWILIO_PHONE_NUMBER=+1234567890

# Google reCAPTCHA
# RECAPTCHA_SITE_KEY=your-recaptcha-site-key
# RECAPTCHA_SECRET_KEY=your-recaptcha-secret-key

# ============================================
# DEPLOYMENT SPECIFIC
# ============================================
# Render.com
RENDER_EXTERNAL_HOSTNAME=your-app.onrender.com

# Heroku
# HEROKU_APP_NAME=your-app-name

# ============================================
# PYTHON PATH (for development IDE)
# ============================================
PYTHONPATH=/path/to/venv/Lib/site-packages:/path/to/project

# ============================================
# API RATE LIMITING
# ============================================
RATELIMIT_ENABLE=True
RATELIMIT_RATE=100/h
RATELIMIT_USE_CACHE=default

# ============================================
# FILE UPLOAD SETTINGS
# ============================================
MAX_UPLOAD_SIZE=5242880  # 5MB in bytes
FILE_UPLOAD_MAX_MEMORY_SIZE=5242880
DATA_UPLOAD_MAX_MEMORY_SIZE=5242880

# ============================================
# IMPORTANT NOTES:
# ============================================
# 1. Never commit .env file to version control
# 2. Use strong, unique passwords for each environment
# 3. Rotate secrets regularly
# 4. Use different keys for development and production
# 5. For production, always set DEBUG=False
# 6. Use HTTPS in production (set secure cookie flags)
# 7. Keep backup of all credentials in secure password manager